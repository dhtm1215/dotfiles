# ==========================================================
# 1. CORE: Vim/VI 모드 활성화 (가장 중요)
#    - 이 설정이 있어야 복사 모드에서 Vim 키(w, e, v, y)가 작동합니다.
# ==========================================================
set-window-option -g mode-keys vi 
set-option -g status-keys vi
# set -g mouse on # (마우스 스크롤을 원하시면 이 줄의 #을 제거)

# ==========================================================
# 2. Appearance & Plugins (기존 설정 유지)
# ==========================================================
# 하단 바 색상
set -g status-bg colour234
set -g status-fg white

# 왼쪽: 세션 이름 + 창 번호
set -g status-left "#[fg=green]#S #[fg=yellow]#I:#W"

# 오른쪽: 날짜, 시각
set -g status-right "#[fg=cyan]%Y-%m-%d #[fg=magenta]%H:%M"

# 플러그인 매니저
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-battery'
set -g @plugin 'tmux-plugins/tmux-cpu'
set -g @plugin 'tmux-plugins/tmux-resurrect'

run '~/.tmux/plugins/tpm/tpm'

# Git 브랜치 표시 함수
set -g status-right-length 100
set -g status-right '#(git -C "#{pane_current_path}" rev-parse --abbrev-ref HEAD 2>/dev/null) | %Y-%m-%d %H:%M'


# ==========================================================
# 3. Key Bindings (복사/붙여넣기)
#    - macOS 시스템 클립보드(pbcopy)에 바로 복사하도록 설정합니다.
# ==========================================================

# 복사 모드 진입: Ctrl + B, [
# 영역 선택 시작: 'v' (Visual Mode 시작)
bind-key -T copy-mode-vi 'v' send -X begin-selection

# 복사 및 종료: 'y' (Yank)로 시스템 클립보드에 복사합니다.
# - 'reattach-to-user-namespace'는 macOS에서 pbcopy가 작동하도록 돕습니다.
bind-key -T copy-mode-vi 'y' send -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"

# 붙여넣기: Ctrl + B, p (Tmux 버퍼에 있는 것을 붙여넣기)
bind-key p paste-buffer
